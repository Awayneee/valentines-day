:root {
  --bg-1: #05030a;
  --bg-2: #16091f;
  --bg-3: #2a0f35;
  --pink: #ff4ea6;
  --violet: #a855ff;
  --text: #ffeef8;
  --muted: #e8c8dc;
  --ok: #80ffc0;
  --err: #ffb0b9;
}

* { box-sizing: border-box; }

html { scroll-behavior: smooth; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Quicksand", sans-serif;
  color: var(--text);
  background: linear-gradient(130deg, var(--bg-1), var(--bg-2) 45%, var(--bg-3));
  padding: 1rem;
  overflow-x: hidden;
  overflow-y: auto;
  transition: background 260ms ease;
}

body::-webkit-scrollbar { width: 10px; }

body::-webkit-scrollbar-thumb {
  background: linear-gradient(var(--pink), var(--violet));
  border-radius: 99px;
}

body::before,
body::after {
  content: "";
  position: fixed;
  width: 38vmax;
  height: 38vmax;
  border-radius: 999px;
  filter: blur(38px);
  z-index: 0;
  animation: blob 12s ease-in-out infinite alternate;
}

body::before {
  top: -10vmax;
  left: -8vmax;
  background: #ff5ab07a;
}

body::after {
  right: -10vmax;
  bottom: -10vmax;
  background: #9f57ff70;
  animation-delay: 1.7s;
}

body.error-mode {
  background: linear-gradient(135deg, #310303, #650808 48%, #920f0f);
}

body.error-mode::before,
body.error-mode::after {
  background: #ff00006b;
}

.page-wrap {
  position: relative;
  z-index: 2;
  width: min(820px, 100%);
  margin: 8vh auto 10vh;
  display: grid;
  gap: 0;
}

.scroll-space {
  height: 36vh;
}

.flowers {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

.flower {
  position: absolute;
  top: -12vh;
  color: #fff;
  opacity: 0.7;
  text-shadow: 0 0 8px #ffffffb3, 0 0 20px #ff84cb99;
  animation: fall linear infinite;
}

.f1 { left: 5%; font-size: 1.7rem; animation-duration: 10s; animation-delay: 0s; }
.f2 { left: 16%; font-size: 1.2rem; animation-duration: 12s; animation-delay: 2s; }
.f3 { left: 28%; font-size: 1.8rem; animation-duration: 11s; animation-delay: 1s; }
.f4 { left: 44%; font-size: 1.3rem; animation-duration: 13s; animation-delay: 4s; }
.f5 { left: 61%; font-size: 1.9rem; animation-duration: 10.5s; animation-delay: 1.3s; }
.f6 { left: 79%; font-size: 1.4rem; animation-duration: 12.8s; animation-delay: 3.2s; }

.heart {
  position: fixed;
  z-index: 4;
  color: #ff6ab6;
  text-shadow: 0 0 10px #ff9ad0cc, 0 0 20px #ffffff66;
  pointer-events: none;
  animation-name: heartRise;
  animation-timing-function: ease-out;
  animation-fill-mode: forwards;
}

.card {
  position: relative;
  width: 100%;
  background: linear-gradient(160deg, #1b0d27de, #120a20e3);
  border: 1px solid #ff9ad055;
  border-radius: 26px;
  padding: 1.25rem;
  box-shadow: 0 24px 70px #00000085, inset 0 0 0 1px #ffffff14;
  backdrop-filter: blur(8px);
  animation: rise 700ms ease;
}

.card.error-shake {
  border-color: #ff4545;
  box-shadow: 0 0 0 2px #ff454540, 0 24px 70px #00000085;
  animation: shake 360ms ease 3;
}

.tag {
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  font-size: 0.82rem;
  color: var(--muted);
}

h1 {
  margin: 0.45rem 0 0.35rem;
  font-family: "Pacifico", cursive;
  font-size: clamp(2rem, 7vw, 3rem);
  color: var(--pink);
  text-shadow: 0 0 24px #ff50af88;
}

h2 { margin: 0.2rem 0 0.35rem; }

.lead {
  margin-top: 0;
  color: #f7deef;
}

.puzzle { display: grid; gap: 0.62rem; }

label {
  font-weight: 700;
  margin-top: 0.5rem;
}

input {
  width: 100%;
  border: 1.4px solid #ffffff50;
  border-radius: 12px;
  padding: 0.8rem 0.9rem;
  font-size: 1rem;
  color: var(--text);
  background: #0c0718c9;
}

input::placeholder { color: #b796c8; }

input:focus {
  outline: 2px solid #ca82ff;
  border-color: transparent;
}

.love-check {
  margin-top: 0.5rem;
  padding: 0.8rem;
  border: 1px solid #ffffff2e;
  border-radius: 14px;
  background: #190f24b8;
}

.love-title {
  margin: 0;
  font-weight: 700;
}

.love-buttons {
  margin-top: 0.7rem;
  display: flex;
  gap: 0.6rem;
  align-items: center;
}

.choice {
  margin-top: 0;
  width: 120px;
  position: relative;
}

.choice.yes {
  background: linear-gradient(90deg, #fb4ea6, #8d4fff);
}

.choice.no {
  background: linear-gradient(90deg, #7a7a7a, #4f4f4f);
  transition: transform 150ms ease;
}

.choice.active {
  box-shadow: 0 0 0 2px #ffffff55, 0 10px 26px #7c2ff56e;
}

button {
  margin-top: 0.85rem;
  border: 0;
  border-radius: 14px;
  padding: 0.9rem 1rem;
  font-size: 1.05rem;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(90deg, var(--pink), var(--violet));
  box-shadow: 0 10px 26px #7c2ff56e;
  cursor: pointer;
  transition: transform 180ms ease, filter 180ms ease;
}

button:hover {
  transform: translateY(-1px);
  filter: brightness(1.08);
}

button:disabled { opacity: 0.55; cursor: not-allowed; }

.feedback {
  min-height: 1.25rem;
  margin: 0.3rem 0 0;
  font-weight: 700;
}

.surprise {
  margin-top: 1.05rem;
  padding: 1rem;
  border-radius: 16px;
  background: linear-gradient(145deg, #2a1135, #1a0e2b);
  border: 1px dashed #ff8ecea6;
  animation: pop 420ms ease;
}

.surprise h2 {
  margin: 0 0 0.4rem;
  color: #ff98cf;
}

.sign { margin-bottom: 0; }

.sign span {
  font-family: "Pacifico", cursive;
  color: #ff79bf;
}

.hidden { display: none; }
.ok { color: var(--ok); }
.err { color: var(--err); }

@keyframes rise {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes pop {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes fall {
  0% { transform: translateY(-15vh) rotate(0deg); }
  100% { transform: translateY(120vh) rotate(360deg); }
}

@keyframes heartRise {
  0% { transform: translate3d(0, 0, 0) scale(0.8); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translate3d(calc((var(--drift, 0) * 1px)), -55vh, 0) scale(1.3); opacity: 0; }
}

@keyframes blob {
  0% { transform: translate(0, 0) scale(1); }
  100% { transform: translate(3vmax, 2vmax) scale(1.08); }
}

@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-8px); }
  40% { transform: translateX(8px); }
  60% { transform: translateX(-6px); }
  80% { transform: translateX(6px); }
  100% { transform: translateX(0); }
}

@media (max-width: 600px) {
  .page-wrap { margin-top: 5vh; }
  .scroll-space { height: 28vh; }
  .card { padding: 1rem; }
  .flower { opacity: 0.55; }
  .love-buttons { gap: 0.45rem; }
  .choice { width: 106px; }
}
